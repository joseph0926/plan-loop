# Plan Loop ì—ì´ì „íŠ¸ ì§€ì¹¨

Plan Loop MCPë¥¼ ì‚¬ìš©í•˜ëŠ” ì—ì´ì „íŠ¸(Claude-Code, Codex)ì˜ ì—­í• ë³„ ì§€ì¹¨ì…ë‹ˆë‹¤.

## ì—­í•  êµ¬ë¶„

| ì—ì´ì „íŠ¸ | ì—­í•  | ì£¼ìš” ë„êµ¬ |
|----------|------|-----------|
| Claude-Code | ì„¤ê³„ì (Planner) | `pl_start`, `pl_submit`, `pl_get_feedback` |
| Codex | ê²€í† ì (Reviewer) | `pl_get_plan`, `pl_feedback` |

---

## Claude-Code (ì„¤ê³„ì)

### ì›Œí¬í”Œë¡œìš°

1. **ì„¸ì…˜ ì‹œì‘**: `pl_start({ goal: "ëª©í‘œ ì„¤ëª…" })`
2. **ê³„íš ì œì¶œ**: `pl_submit({ session_id, plan: "ê³„íš ë‚´ìš©" })`
3. **í”¼ë“œë°± í™•ì¸**: `pl_get_feedback({ session_id })`
4. **ìˆ˜ì • ë° ì¬ì œì¶œ**: í”¼ë“œë°± ë°˜ì˜ í›„ `pl_submit` ì¬í˜¸ì¶œ
5. **ìŠ¹ì¸ í™•ì¸**: ğŸŸ¢ í”¼ë“œë°± ìˆ˜ì‹  ì‹œ êµ¬í˜„ ì§„í–‰

### ê³„íš ì‘ì„± ê°€ì´ë“œ

```markdown
# [ê¸°ëŠ¥ëª…] êµ¬í˜„ ê³„íš

## ëª©í‘œ
- [ë‹¬ì„±í•˜ë ¤ëŠ” ê²°ê³¼]

## êµ¬í˜„ ë‹¨ê³„
1. [ë‹¨ê³„ 1]
2. [ë‹¨ê³„ 2]
3. [ë‹¨ê³„ 3]

## ê²€ì¦ ë°©ë²•
- [í…ŒìŠ¤íŠ¸/í™•ì¸ ë°©ë²•]

## ë¦¬ìŠ¤í¬
- [ì ì¬ì  ìœ„í—˜ ìš”ì†Œ]
```

---

## Codex (ê²€í† ì)

### ì›Œí¬í”Œë¡œìš°

1. **ê³„íš ì¡°íšŒ**: `pl_get_plan({ session_id })`
2. **ìë™ ë¶„ì„**: ê³„íš ë‚´ìš© ê²€í†  í›„ rating ê²°ì •
3. **í”¼ë“œë°± ì´ˆì•ˆ ìƒì„±**: í…œí”Œë¦¿ ê¸°ë°˜ content ì‘ì„±
4. **ì‚¬ìš©ì í™•ì¸**: "ì´ í”¼ë“œë°±ì„ ì œì¶œí• ê¹Œìš”? [Y/n/ìˆ˜ì •]"
5. **í”¼ë“œë°± ì œì¶œ**: `pl_feedback({ session_id, rating, content })`

### í”¼ë“œë°± ìë™ì™„ì„± ì›Œí¬í”Œë¡œìš°

```
pl_get_plan í˜¸ì¶œ
       â”‚
       â–¼
  ê³„íš ë‚´ìš© ë¶„ì„
       â”‚
       â–¼
  rating ê²°ì • (ğŸ”´/ğŸŸ¡/ğŸŸ¢)
       â”‚
       â–¼
  í…œí”Œë¦¿ ê¸°ë°˜ content ì´ˆì•ˆ ìƒì„±
       â”‚
       â–¼
  ì‚¬ìš©ìì—ê²Œ í™•ì¸ ìš”ì²­
  "ì´ í”¼ë“œë°±ì„ ì œì¶œí• ê¹Œìš”? [Y/n/ìˆ˜ì •]"
       â”‚
       â”œâ”€ Y â†’ pl_feedback í˜¸ì¶œ
       â”œâ”€ n â†’ ì·¨ì†Œ
       â””â”€ ìˆ˜ì • â†’ ì‚¬ìš©ì ì…ë ¥ ë°˜ì˜ í›„ pl_feedback í˜¸ì¶œ
```

### ìë™ ë¶„ì„ ê¸°ì¤€

| Rating | ê¸°ì¤€ | ì˜ˆì‹œ |
|--------|------|------|
| ğŸ”´ Major | êµ¬ì¡°ì  ê²°í•¨, í•„ìˆ˜ ìš”ì†Œ ëˆ„ë½, ë³´ì•ˆ/ì„±ëŠ¥ ì´ìŠˆ | ì¸ì¦ ì—†ëŠ” API, SQL ì¸ì ì…˜ ê°€ëŠ¥ì„± |
| ğŸŸ¡ Minor | ëª…í™•ì„± ë¶€ì¡±, ê²€ì¦ ê¸°ì¤€ ë¯¸í¡, ë¬¸ì„œí™” í•„ìš” | ì—ëŸ¬ ì²˜ë¦¬ ëˆ„ë½, í…ŒìŠ¤íŠ¸ ê³„íš ì—†ìŒ |
| ğŸŸ¢ Approved | ëª¨ë“  ìš”êµ¬ì‚¬í•­ ì¶©ì¡±, ì‹¤í–‰ ê°€ëŠ¥í•œ ê³„íš | ë‹¨ê³„ë³„ ëª…í™•, ê²€ì¦ ë°©ë²• í¬í•¨ |

### í”¼ë“œë°± í…œí”Œë¦¿

#### ğŸ”´ Major Revision
```markdown
**Rating**: ğŸ”´ Major Revision

**ë¬¸ì œì **:
- [êµ¬ì²´ì  ì´ìŠˆ 1]
- [êµ¬ì²´ì  ì´ìŠˆ 2]

**ìˆ˜ì • ìš”ì²­**:
- [í•„ìˆ˜ ë³€ê²½ì‚¬í•­ 1]
- [í•„ìˆ˜ ë³€ê²½ì‚¬í•­ 2]

**ì°¸ê³ **:
- [ê´€ë ¨ íŒŒì¼/ê·œì¹™/ë¬¸ì„œ]
```

#### ğŸŸ¡ Minor Revision
```markdown
**Rating**: ğŸŸ¡ Minor Revision

**ê°œì„ ì **:
- [ì„ íƒì  ì´ìŠˆ 1]
- [ì„ íƒì  ì´ìŠˆ 2]

**ì œì•ˆ**:
- [ê¶Œì¥ ë³€ê²½ì‚¬í•­ 1]
- [ê¶Œì¥ ë³€ê²½ì‚¬í•­ 2]
```

#### ğŸŸ¢ Approved
```markdown
**Rating**: ğŸŸ¢ Approved

**í™•ì¸ í•­ëª©**:
- [ê²€í† ëœ ë‚´ìš© 1]
- [ê²€í† ëœ ë‚´ìš© 2]

**ìŠ¹ì¸ ì‚¬ìœ **: [LGTM / ì¡°ê±´ë¶€ ìŠ¹ì¸ ì‚¬ìœ ]
```

---

## ê³µí†µ ë„êµ¬

| ë„êµ¬ | ìš©ë„ | ì‚¬ìš©ì |
|------|------|--------|
| `pl_status` | ì„¸ì…˜ ì „ì²´ ìƒíƒœ ì¡°íšŒ | ì–‘ìª½ |
| `pl_list` | ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ (í•„í„°/ì •ë ¬) | ì–‘ìª½ |
| `pl_delete` | ì„¸ì…˜ ì‚­ì œ | ì–‘ìª½ |
| `pl_force_approve` | exhausted ì„¸ì…˜ ê°•ì œ ìŠ¹ì¸ | ì–‘ìª½ |

---

## ìƒíƒœ ì „ì´ ì°¸ì¡°

```
[drafting] â”€â”€pl_submitâ”€â”€â–¶ [pending_review]
                                â”‚
                          pl_feedback
                                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                      â–¼                      â–¼
     ğŸ”´ / ğŸŸ¡                   ğŸŸ¢               iteration >= max
         â”‚                      â”‚                      â”‚
         â–¼                      â–¼                      â–¼
[pending_revision]         [approved]            [exhausted]
         â”‚                                             â”‚
    pl_submit                                  pl_force_approve
         â”‚                                             â”‚
         â–¼                                             â–¼
[pending_review]                                 [approved]
```

---

## ì°¸ì¡°

- [plan-loop-mcp/README.md](plan-loop-mcp/README.md) - MCP ì„œë²„ ìƒì„¸ ë¬¸ì„œ
- [plan-loop-mcp/templates/feedback-templates.md](plan-loop-mcp/templates/feedback-templates.md) - í”¼ë“œë°± í…œí”Œë¦¿ ì›ë³¸
