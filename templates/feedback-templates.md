# 피드백 템플릿

Plan Loop에서 `pl_feedback` 호출 시 사용하는 피드백 템플릿입니다.

---

## 🔴 Major Revision

심각한 문제가 있어 대폭 수정이 필요한 경우 사용합니다.

### 사용 기준
- 구조적 결함 (아키텍처 문제)
- 필수 요소 누락 (인증, 에러 처리 등)
- 보안 취약점 (인젝션, 권한 문제)
- 성능 이슈 (N+1 쿼리, 메모리 누수 가능성)

### 템플릿

```markdown
**Rating**: 🔴 Major Revision

**문제점**:
- [구체적 이슈 1]
- [구체적 이슈 2]

**수정 요청**:
- [필수 변경사항 1]
- [필수 변경사항 2]

**참고**:
- [관련 파일/규칙/문서]
```

### 예시

```markdown
**Rating**: 🔴 Major Revision

**문제점**:
- API 엔드포인트에 인증 미들웨어가 누락됨
- 사용자 입력값 검증 없이 DB 쿼리에 직접 사용

**수정 요청**:
- 모든 /api/* 라우트에 authMiddleware 추가
- zod 또는 joi를 사용한 입력값 검증 추가

**참고**:
- src/middleware/auth.ts 참조
- OWASP API Security Top 10
```

---

## 🟡 Minor Revision

작은 개선이 필요하지만 전체 방향은 올바른 경우 사용합니다.

### 사용 기준
- 명확성 부족 (모호한 설명)
- 검증 기준 미흡 (테스트 계획 없음)
- 문서화 필요 (주석, README 업데이트)
- 에지 케이스 미고려

### 템플릿

```markdown
**Rating**: 🟡 Minor Revision

**개선점**:
- [선택적 이슈 1]
- [선택적 이슈 2]

**제안**:
- [권장 변경사항 1]
- [권장 변경사항 2]
```

### 예시

```markdown
**Rating**: 🟡 Minor Revision

**개선점**:
- 에러 발생 시 사용자에게 보여줄 메시지가 명시되지 않음
- 단위 테스트 계획이 포함되지 않음

**제안**:
- 에러 코드별 사용자 메시지 매핑 테이블 추가
- Jest 기반 단위 테스트 항목 명시
```

---

## 🟢 Approved

계획이 충분히 검토되어 승인하는 경우 사용합니다.

### 사용 기준
- 모든 요구사항 충족
- 실행 가능한 단계별 계획
- 검증 방법 포함
- 리스크 고려됨

### 템플릿

```markdown
**Rating**: 🟢 Approved

**확인 항목**:
- [검토된 내용 1]
- [검토된 내용 2]

**승인 사유**: [LGTM / 조건부 승인 사유]
```

### 예시

```markdown
**Rating**: 🟢 Approved

**확인 항목**:
- 단계별 구현 계획 명확
- 에러 처리 및 롤백 방안 포함
- 테스트 계획 적절

**승인 사유**: LGTM - 구현 진행하세요.
```

---

## 조건부 승인 (🟢 with conditions)

대체로 승인하지만 구현 시 주의사항이 있는 경우 사용합니다.

### 템플릿

```markdown
**Rating**: 🟢 Approved

**확인 항목**:
- [검토된 내용]

**승인 사유**: 조건부 승인

**조건**:
- [구현 시 반드시 지켜야 할 사항 1]
- [구현 시 반드시 지켜야 할 사항 2]
```

### 예시

```markdown
**Rating**: 🟢 Approved

**확인 항목**:
- 전체 아키텍처 적절
- API 설계 명확

**승인 사유**: 조건부 승인

**조건**:
- 프로덕션 배포 전 부하 테스트 필수
- 환경변수로 rate limit 설정 가능하도록 구현
```

---

## 참조

- [AGENTS.md](../AGENTS.md) - 에이전트별 역할 및 워크플로우
- [README.ko.md](../README.ko.md) - MCP 서버 문서
